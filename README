1. OVERVIEW
===========

Dropletfs-fuse, a FUSE filesystem for cloud storage, using the Scality
Droplet library [1].  Be sure to read and configure your environment as
explained in [2].


2. INSTALLATION
===============

This program is not packaged yet, as far as I know.  You'll have to compile
it by yourself.  It relies on the Droplet library, so grab it!

	$ git clone git://github.com/scality/Droplet
	$ cd Droplet
	$ ./autogen.sh
	$ ./configure
	$ make
	$ sudo make install

If the previous lines fail, I suggest you take a look to [3].

Then go to the dropletfs-fuse directory, and type:

	$ make
	$ sudo make install


3. SETTINGS
===========

 - libdroplet object path

the Droplet library is installed in /usr/local/lib by default, so you may have
to set LD_LIBRARY_PATH to this value before running dplfs.

 - Compression

You can set DROPLETFS_COMPRESSION_METHOD to ZLIB, to reduce the network load.
Default value is NONE. The default compression level is 3. You can change it
through DROPLETFS_ZLIB_LEVEL.

 - Cache directory

Dropletfs use a local cache directory to operate on file descriptors.  This
cache holds the whole files you're working on.  I strongly recommend you to
set it to a directory in a partition with a bunch of available GB.

You can change its value through DROPLETFS_CACHE_DIR.  Default is /tmp.

 - Garbage collection

DROPLETFS_GC_AGE_THRESHOLD (in seconds): a cache file older than this value
will be removed.  If zero, the garbage collection is not triggered. Default
is 0.
DROPLETFS_GC_LOOP_DELAY (in seconds): the GC is invoked with this period.
Default is 60.

 - Filename pattern exclusion

In some specific cases, we do not want to upload some files on remote
storage (for example temporary files in scientific computing).  To handle
this, you can set DROPLETFS_EXCLUSION_PATTERN to a regular expression.

$ export DROPLETFS_EXCLUSION_PATTERN='\.tmp$|\.foo$' to exclude all the
files ending in .tmp or .foo

This feature is *experimental*, we do not recommend using it unless you know
exactly what you're doing.

4. FIRST RUN
============

Now, mount your cloud storage wherever you want, and enjoy!

	$ sudo mkdir /tmp/cloud
	$ dplfs <my bucketname> /tmp/cloud
	$ ls /tmp/cloud
	total 0
	-rw-r--r-- 1 poz poz      10 Dec 20 16:18 bar
	dr-x------ 1 poz fuse      0 Dec 30 23:20 code/
	dr-x------ 1 poz fuse      0 Dec 30 23:20 fix/
	-rw-r--r-- 1 poz poz       4 Dec 12 17:19 foo.backup
	dr-x------ 1 poz fuse      0 Dec 30 23:20 hey/
	-rw-r--r-- 1 poz poz  214642 Dec 20 16:12 metro.pdf
	dr-x------ 1 poz fuse      0 Dec 30 23:20 test/
	-rw-r--r-- 1 poz poz     538 Dec 29 11:40 tmpstr.c
	-rw-r--r-- 1 poz poz     111 Dec 29 12:19 tmpstr.h
	$



Please report bugs and comments to:
	https://github.com/pozdnychev/dropletfs-fuse/issues


[1] http://github.com/scality/Droplet
[2] http://github.com/scality/Droplet/wiki/Configuration-file
[3] http://github.com/scality/Droplet/README
